{"ast":null,"code":"import jwtDecode from \"jwt-decode\";\nimport { createStore } from \"redux\";\nexport class AuthState {\n  constructor() {\n    this.token = null;\n    this.user = null;\n    this.token = localStorage.getItem(\"token\");\n\n    if (this.token) {\n      const container = jwtDecode(this.token);\n      this.user = container.user;\n    }\n  }\n\n}\nexport let AuthActionType;\n\n(function (AuthActionType) {\n  AuthActionType[\"Register\"] = \"Register\";\n  AuthActionType[\"Login\"] = \"Login\";\n  AuthActionType[\"Logout\"] = \"Logout\";\n})(AuthActionType || (AuthActionType = {}));\n\nexport function authReducer() {\n  let currentState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : new AuthState();\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n  const newState = { ...currentState\n  };\n\n  switch (action.type) {\n    case AuthActionType.Register:\n    case AuthActionType.Login:\n      newState.token = action.payload;\n      const container = jwtDecode(newState.token);\n      newState.user = container.user;\n      localStorage.setItem(\"token\", newState.token);\n      break;\n\n    case AuthActionType.Logout:\n      newState.token = null;\n      newState.user = null;\n      localStorage.removeItem(\"token\");\n      break;\n  }\n\n  return newState;\n}\nexport const authStore = createStore(authReducer);","map":{"version":3,"names":["jwtDecode","createStore","AuthState","constructor","token","user","localStorage","getItem","container","AuthActionType","authReducer","currentState","action","newState","type","Register","Login","payload","setItem","Logout","removeItem","authStore"],"sources":["/Users/nivyulevitch/Dropbox/Full Stack/John Bryce/Projects/3/Vacation-204789671/Vacation-Project/Frontend/src/Redux/AuthState.ts"],"sourcesContent":["import jwtDecode from \"jwt-decode\";\nimport { createStore } from \"redux\";\nimport UserModel from \"../Models/UserModel\";\n\nexport class AuthState {\n    public token: string = null;\n    public user: UserModel = null\n\n    constructor () {\n        this.token = localStorage.getItem(\"token\");\n        if (this.token) {\n            const container: { user: UserModel } = jwtDecode(this.token);\n            this.user = container.user;\n        }\n    }\n}\n\nexport enum AuthActionType {\n    Register = \"Register\",\n    Login = \"Login\",\n    Logout = \"Logout\"\n}\n\nexport interface AuthAction {\n    type: AuthActionType;\n    payload?: string;\n}\n\nexport function authReducer(currentState = new AuthState(), action: AuthAction): AuthState {\n    const newState = {...currentState};\n\n    switch (action.type) {\n        case AuthActionType.Register:\n        case AuthActionType.Login:\n            newState.token = action.payload;\n            const container: { user: UserModel } = jwtDecode(newState.token);\n            newState.user = container.user;\n            localStorage.setItem(\"token\", newState.token);\n            break;\n\n        case AuthActionType.Logout:\n            newState.token = null;\n            newState.user = null;\n            localStorage.removeItem(\"token\");\n            break;\n    }\n\n    return newState;\n}\n\nexport const authStore = createStore(authReducer);"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,YAAtB;AACA,SAASC,WAAT,QAA4B,OAA5B;AAGA,OAAO,MAAMC,SAAN,CAAgB;EAInBC,WAAW,GAAI;IAAA,KAHRC,KAGQ,GAHQ,IAGR;IAAA,KAFRC,IAEQ,GAFU,IAEV;IACX,KAAKD,KAAL,GAAaE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAb;;IACA,IAAI,KAAKH,KAAT,EAAgB;MACZ,MAAMI,SAA8B,GAAGR,SAAS,CAAC,KAAKI,KAAN,CAAhD;MACA,KAAKC,IAAL,GAAYG,SAAS,CAACH,IAAtB;IACH;EACJ;;AAVkB;AAavB,WAAYI,cAAZ;;WAAYA,c;EAAAA,c;EAAAA,c;EAAAA,c;GAAAA,c,KAAAA,c;;AAWZ,OAAO,SAASC,WAAT,GAAoF;EAAA,IAA/DC,YAA+D,uEAAhD,IAAIT,SAAJ,EAAgD;EAAA,IAA/BU,MAA+B;EACvF,MAAMC,QAAQ,GAAG,EAAC,GAAGF;EAAJ,CAAjB;;EAEA,QAAQC,MAAM,CAACE,IAAf;IACI,KAAKL,cAAc,CAACM,QAApB;IACA,KAAKN,cAAc,CAACO,KAApB;MACIH,QAAQ,CAACT,KAAT,GAAiBQ,MAAM,CAACK,OAAxB;MACA,MAAMT,SAA8B,GAAGR,SAAS,CAACa,QAAQ,CAACT,KAAV,CAAhD;MACAS,QAAQ,CAACR,IAAT,GAAgBG,SAAS,CAACH,IAA1B;MACAC,YAAY,CAACY,OAAb,CAAqB,OAArB,EAA8BL,QAAQ,CAACT,KAAvC;MACA;;IAEJ,KAAKK,cAAc,CAACU,MAApB;MACIN,QAAQ,CAACT,KAAT,GAAiB,IAAjB;MACAS,QAAQ,CAACR,IAAT,GAAgB,IAAhB;MACAC,YAAY,CAACc,UAAb,CAAwB,OAAxB;MACA;EAbR;;EAgBA,OAAOP,QAAP;AACH;AAED,OAAO,MAAMQ,SAAS,GAAGpB,WAAW,CAACS,WAAD,CAA7B"},"metadata":{},"sourceType":"module"}